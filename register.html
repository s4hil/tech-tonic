<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="title" content="Tech Tonic by CSE DSATM 2024" />
    <meta
      name="description"
      content="It's an immersive experience designed to ignite the spark of curiosity, foster innovation, and celebrate the dynamic world of technology."
    />
    <meta name="author" content="DSATM" />
    <meta name="keywords" content="Tech Tonic, DSATM, Hackathon, Bengaluru" />
    <title>Register - Tech Tonic 2024</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css?family=Varela+Round"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet"
    />

    <!-- Custom styles for this template -->
    <link href="css/grayscale.min.css" rel="stylesheet" />
    <link href="css/custom2.css" rel="stylesheet" />
    <link href="css/countdown.css" rel="stylesheet" />

    <link rel="shortcut icon" type="image/x-icon" href="img/dsatm-logo.png" />
  </head>

  <body id="page-top">
    <nav
      class="navbar navbar-expand-lg navbar-light fixed-top"
      id="mainNav"
      style="border-bottom: 1px solid #c4c4c4"
    >
      <div id="navbar-container" class="container">
        <div id="navbar-top-menu">
          <div class="d-flex align-items-center justify-content-between">
            <a class="navbar-brand js-scroll-trigger" href="index.html">
              <div class="title-icon"></div>
            </a>
            <button
              class="navbar-toggler nexa"
              type="button"
              data-toggle="collapse"
              data-target="#navbarResponsive"
              aria-controls="navbarResponsive"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              Menu &nbsp; <i class="fas fa-bars"></i>
            </button>
          </div>
        </div>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul id="navbar-buttons" class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger nexa" href="index.html"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger nexa" href="#">Brochure</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger nexa" href="register.html"
                >Register</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger nexa" href="getqr.html"
                >Get QR</a
              >
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <section class="text-center">
      <section>
        <h1 class="sub-heading diagonal-text orange sub-heading-title">
          Register
        </h1>
      </section>

      <section class="diagonal-section white-bg" style="background: #f1f1f1">
        <div class="mx-auto diagonal-section-content">
          <div class="container nexa">
            <style>
              form {
                /*border: 1px solid red;*/
              }
              .form-group {
                margin-top: 1.5rem;
              }
              label {
                display: flex;
              }
            </style>

            <div class="row d-flex justify-content-center">
              <div class="col-12 col-lg-6">
                <form
                  class="form"
                  id="register-form"
                  enctype="multipart/form-data"
                >
                  <div class="">
                    <div class="form-fields">
                      <div class="form-group">
                        <label>Event</label>
                        <select id="events" name="event" class="form-control">
                          <option value="">Select</option>
                          <option value="Code Arena">
                            Code Arena (Hackathon)
                          </option>
                          <option value="Idea X">Idea X (Ideathon)</option>
                          <option value="Codify">Codify (Coding)</option>
                          <option value="Trivia Quiz">
                            Trivia Quiz (Quiz)
                          </option>
                          <option value="VisionXpo">Vision Xpo</option>
                        </select>
                      </div>

                      <div class="form-group">
                        <label>Team Name</label>
                        <input
                          class="form-control"
                          type="text"
                          name="team-name"
                          maxlength="30"
                          id="team-name"
                        />
                      </div>
                      <!-- col-4 -->

                      <div class="form-group">
                        <label>Email Address Of one member</label>
                        <input
                          class="form-control"
                          type="email"
                          name="email"
                          id="email"
                          onblur="checkDuplication(this)"
                        />
                      </div>
                      <!-- col-6 -->

                      <div class="form-group">
                        <label>College Name</label>
                        <input class="form-control" name="collegeName"
                        type="text" of college" id="college-name">
                      </div>

                      <div
                        class="form-group"
                        style="display: none"
                        id="code-arena-size-box"
                      >
                        <label>Team Size</label>
                        <select
                          class="form-control"
                          id="code-arena-size"
                          onchange="handleSize()"
                        >
                          <option value="0">Choose</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                        </select>
                      </div>

                      <div class="member-box"></div>

                      <div
                        class="form-group"
                        style="display: none"
                        id="code-arena-domain"
                      >
                        <label>Domain</label>
                        <select class="form-control" id="domain" name="domain">
                          <option value="">Select</option>
                          <option value="Web Dev">Web Development</option>
                          <option value="IOT">IoT</option>
                          <option value="Healthcare">Healthcare</option>
                        </select>
                      </div>

                      <div class="form-group mb-2" id="qr-input">
                        <div class="d-flex justify-content-between mb-2">
                          <label>Payment Screenshot</label>
                          <button
                            id="showUPI"
                            class="btn btn-success pt-1 pb-1 pl-2 pr-2"
                          >
                            Show UPI QR
                          </button>
                        </div>
                        <div id="upi-info">
                          <!-- <img src="img/qrpayment.jpg" width="100%"> -->
                          <img src="img/new_qr.jpeg" width="100%" />
                        </div>
                        <br />
                        <input
                          class="form-control"
                          type="file"
                          id="sc"
                          value=""
                          name="sc"
                        />
                      </div>

                      <div class="form-group" id="txn-id-input">
                        <label>Transaction ID</label>
                        <input
                          class="form-control"
                          name="txn_id"
                          type="text"
                          id="txn_id"
                        />
                      </div>

                      <div class="form-group">
                        <button
                          class="btn btn-lg btn-primary form-control"
                          id="submitForm"
                        >
                          Submit
                        </button>
                      </div>
                    </div>
                    <!-- row -->
                  </div>
                  <!-- contact-form -->
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 	<section class="diagonal-section white-bg">
			
				<div class="mx-auto diagonal-section-content">
					
				</div>
				
			</section> -->

      <section
        class="diagonal-section black-bg"
        style="height: 4em; opacity: 1"
      ></section>

      <section class="footer-section black-bg">
        <div style="padding-top: 0">
          <div class="small text-center white">
            <div class="social d-flex justify-content-center"></div>
            <div class="mt-3 row d-flex justify-content-center">
              <div class="col-12 col-lg-6">
                <div class="mb-4 nexa orange-hover orange">Contact us:</div>
                <ul style="list-style-type: none; margin: 0; padding: 0">
                  <li>Sandeep Reddy (7702922128)</li>
                  <li>Vijay Suprith (9345652156)</li>
                  <li>Dhanush Gupta (6360855805)</li>
                  <li></li>
                </ul>
              </div>
              <div class="col-12 col-lg-6 copyrights-col">
                <div class="white mb-4 nexa">
                  Made with <i class="fas fa-heart"></i> by
                  <a href="https://s4hil.github.io">Sahil Showkat</a>
                </div>
                <a href="https://github.com/s4hil" class="mx-2 orange-hover">
                  <i class="fab fa-github"></i>
                </a>
                <a
                  href="https://www.linkedin.com/en/sahil-parray"
                  class="mx-2 orange-hover"
                >
                  <i class="fab fa-linkedin"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>
    </section>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/grayscale.js"></script>

    <!-- Custom javascript -->
    <script src="js/custom.js"></script>
    <script src="js/config.js"></script>

    <!-- Particle library
		<script src="particles/particles.js"></script>
		<script src="particles/app.js"></script> -->

    <script>
      // alert("Dear Participants,\n\nTechTonic is undergoing upgrades and will now take place at the end of April. Please hold onto your excitement for the grand return, featuring a larger prize pool and enhanced experience.\nThank you for your understanding and continued support.\n\nBest regards,\nTechTonic Organizing Committee");

      $("#upi-info").slideUp();
      $("#showUPI").click((e) => {
        e.preventDefault();
        $("#upi-info").slideToggle();
      });

      function checkDuplication(e) {
        let email = $(e).val();
        var exists = false;

        $.ajax({
          url: CHECK_DUBLICATION,
          dataType: "json",
          data: JSON.stringify({ email: email }),
          method: "POST",
          success: function (data) {
            if (data.exists == true) {
              alert("Email already registered, use a different one!");
              $("#email").val("");
              $("#email").focus();
            }
          },
          error: function () {
            console.log("Email check req err");
          },
        });
      }

      $("#register-form").on("submit", function (e) {
        e.preventDefault();
        console.log("clicked");

        let teamName = $("#team-name").val();
        let email = $("#email").val();
        let college = $("#college-name").val();

        let member1Name = $("#member-1-name").val();
        let member1Mobile = $("#member-1-mobile").val();
        let member1usn = $("#member-1-usn").val();
        let member2Name = $("#member-2-name").val();
        let member2Mobile = $("#member-2-mobile").val();
        let member2usn = $("#member-2-usn").val();
        let member3Name = $("#member-3-name").val();
        let member3Mobile = $("#member-3-mobile").val();
        let member3usn = $("#member-3-usn").val();

        // console.log(teamName);
        // console.log(email)
        // console.log(college)

        // console.log(member1Name)
        // console.log(member1Mobile)
        // console.log(member1usn)
        // console.log(member2Name)
        // console.log(member2Mobile)
        // console.log(member2usn)
        // console.log(member3Name)
        // console.log(member3Mobile)
        // console.log(member3usn)

        let domain = $("#domain").val();

        let inputs = $("input");
        var input_error = false;
        for (let i = 0; i < inputs.length; i++) {
          if (inputs[i].value == "" || inputs[i].value == null) {
            inputs[i].classList.add("is-invalid");
            input_error = true;
          }
        }
        if (input_error == false) {
          $.ajax({
            type: "POST",
            url: SAVE_DATA,
            data: new FormData(this),
            dataType: "json",
            contentType: false,
            processData: false,
            cache: false,
            beforeSend: function () {
              $("#submitForm").prop("disabled", true);
              $("#submitForm").text("Submitting...");
              $("#register-form").css("opacity", "0.5");
            },
            success: function (x) {
              console.log(x);
              $("#submitForm").prop("disabled", false);
              $("#submitForm").text("Submit");
              $("#register-form").css("opacity", "1");
              $("#register-form")[0].reset();

              if (x.status == false) {
                alert(x.msg);
              } else {
                alert("Submitted Successfully, Get QR Now!");
                window.location.href = "getqr.html";
              }
            },
            error: function (s) {
              console.log(s.responseText);
            },
          });
        }
      });

      $("#events").on("change", function () {
        let op = "";
        let x = $(this).val();
        let index = team_sizes.findIndex((item) => item.name == x);
        let size = team_sizes[index].size;
        let name = team_sizes[index].name;

        for (let i = 0; i < size; i++) {
          let num = i + 1;
          op += `
	        			<div class="form-group">
                        	<label id='leader-name-label'>Member Name - ${num}</label>
                            <input class="form-control" name="member-${num}-name" type="text" id="member-${num}-name">
                        </div>
                        <div class="form-group">
                        	<label id='leader-mobile-label'>Member Mobile - ${num}</label>
                            <input class="form-control" name="member-${num}-mobile" type="text"  id="member-${num}-mobile">
                        </div>
                        <div class="form-group">
                        	<label id='leader-usn-label'>Member USN - ${num}</label>
                            <input class="form-control" name="member-${num}-usn" type="text" id="member-${num}-usn">
                        </div>
	        		`;
        }
        $(".member-box").html(op);
        if (name == "Code Arena") {
          $("#code-arena-domain").show();
          $("#code-arena-size-box").show();
        }
        if (name == "Gaming (BGMI)" || name == "Gaming (FreeFire)") {
          $("#leader-name-label").text("Leader Name");
          $("#leader-mobile-label").text("Leader WhatsApp Number");
          $("#leader-usn-label").text("Leader USN Number");
        }

        if (
          name == "Vision Xpo" ||
          name == "Artify" ||
          name == "Robo Rally" ||
          name == "Trade Rave"
        ) {
          $("#txn-id-input").remove();
          $("#qr-input").remove();
        }
      });

      function handleSize() {
        let num = $("#code-arena-size").val();
        console.log(num);
        if (num == 3) {
          $("#member-4-usn").val("NA");
          $("#member-4-name").val("NA");
          $("#member-4-mobile").val("NA");
          $("#member-4-usn").attr("disabled", true);
          $("#member-4-name").attr("disabled", true);
          $("#member-4-mobile").attr("disabled", true);
        }
      }
    </script>
  </body>
</html>
