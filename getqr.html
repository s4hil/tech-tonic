<!DOCTYPE html>
<html lang="en">

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="title" content="Tech Tonic by CSE DSATM 2024">
		<meta name="description" content="Tech Tonic, A 24-hour hackathon at DSATM, Bengaluru | 18-19 January 2024">
		<meta name="author" content="DSATM">
		<meta name="keywords" content="Tech Tonic, DSATM, Hackathon, Bengaluru">
		<title>Tech Tonic 2024</title>

		<!-- Bootstrap core CSS -->
		<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom fonts for this template -->
		<link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="css/grayscale.min.css" rel="stylesheet">
		<link href="css/custom2.css" rel="stylesheet">
		<link href="css/countdown.css" rel="stylesheet">

		<link rel="shortcut icon" type="image/x-icon" href="img/algosphere-icon.png">

	</head>


	<body id="page-top">

		<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav" style="border-bottom: 1px solid #c4c4c4;">
			<div id="navbar-container" class="container">
				<div id="navbar-top-menu">
					<div class="d-flex align-items-center justify-content-between">
						<a class="navbar-brand js-scroll-trigger" href="index.html">
							<div class="title-icon"></div>
						</a>
						<button class="navbar-toggler nexa" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
							Menu &nbsp; <i class="fas fa-bars"></i>
						</button>
					</div>
				</div>
				<div class="collapse navbar-collapse" id="navbarResponsive">
					<ul id="navbar-buttons" class="navbar-nav ml-auto">
						<li class="nav-item">
							<a class="nav-link js-scroll-trigger nexa" href="index.html">Home</a>
						</li>
						<li class="nav-item">
							<a class="nav-link js-scroll-trigger nexa" href="brochure.pdf">Brochure</a>
						</li>
						<li class="nav-item">
							<a class="nav-link js-scroll-trigger nexa" href="register.html">Register</a>
						</li>
						<li class="nav-item">
							<a class="nav-link js-scroll-trigger nexa" href="getqr.html">Get QR</a>
						</li>
					</ul>
				</div>
			</div>
		</nav>
		
		<section class="text-center">
			<section>
				<h1 class="sub-heading diagonal-text orange sub-heading-title">Register</h1>
			</section>
			
			<section class="diagonal-section white-bg"  style="background: #f1f1f1;">
			
				<div class="mx-auto diagonal-section-content">
					<div class="container nexa">
						<div class="row d-flex justify-content-center">
							<div class="col-12 col-lg-6">
								<div class="form-group">
									<label class="d-flex">Enter Regsitered Email</label>
			                        <input class="form-control" type="email" maxlength="50" id="email">
			                    </div>
			                    <div class="form-group">
			                        <button class="btn btn-primary" id="submitForm">Fetch</button>
			                    </div>
			                    <div id="card-container">
			                    	<div class="submit d-flex justify-content-center">
				                    	<div class="qr-card border p-3 m-3" id="qr-card">
				                    		<div class="header">
				                    			<h3>Tech Tonic</h3>
				                    		</div>
				                        	<div id="qr-code"></div>
				                        	<br>
				                        	<h6 id="team-name"></h6>
				                    	</div>
			                    	</div>
			                    	<button class="btn btn-info py-2 mt-3" id="download-card">Download</button>
			                    </div>
							</div>
						</div>
					</div>
				</div>
				
			</section>


		<!-- 	<section class="diagonal-section white-bg">
			
				<div class="mx-auto diagonal-section-content">
					
				</div>
				
			</section> -->
			
			<section class="diagonal-section black-bg" style="height: 4em; opacity: 1;"></section>
			
			<section class="footer-section black-bg">
			
				<div style="padding-top: 0">
					<div class="small text-center white">
						<div class="social d-flex justify-content-center"></div>
						<div class="mt-3 row d-flex justify-content-center">
							<div class="col-12 col-lg-6">
								<div class="mb-4 nexa orange-hover orange">
									Contact us:
								</div>
								<ul style="list-style-type: none; margin: 0; padding: 0;">
									<li>Sandeep Reddy (7702922128)</li>
									<li>Vijay Suprith (9345652156)</li>
									<li>Dhanush Gupta (6360855805)</li>
									<li></li>
								</ul>
							</div>
							<div class="col-12 col-lg-6 copyrights-col">
								<div class="white mb-4 nexa">
									Made with <i class="fas fa-heart"></i> by <a href="https://s4hil.github.io">Sahil Showkat</a>
								</div>
								<a href="https://github.com/s4hil" class="mx-2 orange-hover">
								  <i class="fab fa-github"></i>
								</a>
								<a href="https://www.linkedin.com/en/sahil-parray" class="mx-2 orange-hover">
									<i class="fab fa-linkedin"></i>
								</a>
							</div>
						</div>
					</div>
				</div>

				<img src="" id="previewImg">
				
			</section>
			
		</section>

		<!-- Bootstrap core JavaScript -->
		<script src="vendor/jquery/jquery.min.js"></script>
		<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

		<!-- Plugin JavaScript -->
		<script src="vendor/jquery-easing/jquery.easing.min.js"></script>

		<!-- Custom scripts for this template -->
		<script src="js/grayscale.js"></script>

		<!-- Custom javascript -->
		<script src="js/custom.js"></script>
		<script src="js/config.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    	<script type='text/javascript' src='js/qrcode.min.js'></script>
		
		<script>
			$("#card-container").hide();
			$("#submitForm").click((e)=>{
	            let email = $("#email").val();

	            $.ajax({
	                url: QR_URL,
	                method: "POST",
	                data: JSON.stringify({ email:email }),
	                dataType: "json",
	                success: function (data) {
	                    if (data.data.team_name == null) {
	                        alert("Entered email does not match with submissions.")
	                    }
	                    else{
	                        let x = data.data;
	                        let teamNumber = x.team_id;
	                        let teamName = x.team_name;
	                        let event = x.event;
	                        let members = x.members;
	                        const qrData = {team_number:teamNumber, team_name:teamName, participants:members, event:event};
	                        new QRCode(document.getElementById("qr-code"), JSON.stringify(qrData));
	                        $("#team-name").text(teamName+" ("+teamNumber+")");
	                        $("#card-container").show();
	                    }
	                },
	                error: function () {
	                    console.log("err wd get qr data req");
	                }
	            })
	        });

	        $("#download-card").click((e)=>{
	        	e.preventDefault();
	        	html2canvas(document.getElementById("qr-card")).then(function (canvas) {			
	        		var anchorTag = document.createElement("a");
					document.body.appendChild(anchorTag);
					document.getElementById("previewImg").appendChild(canvas);
					anchorTag.download = "tech-tonic-qr.jpg";
					anchorTag.href = canvas.toDataURL();
					anchorTag.target = '_blank';
					anchorTag.click();
				});
	        })
		</script>

	</body>

</html>
